import{_ as P,o as d,h as b,w as n,d as o,k as u,i as k,p as R,b as e,y,c as m,g as D,F as _,t as r,m as j,s as A,v as T,j as x,a as B,r as g,V as C,e as N,f as h}from"./index-51defc55.js";import{u as M}from"./store-cd25396c.js";import{V as O,c as K,d as F}from"./VToolbar-752396e1.js";import{M as E}from"./MenuCard-116859ff.js";import{V,b as U,a as w,c as L}from"./VSelect-0c4809ec.js";import{V as G}from"./VTextarea-7b6be885.js";import{B as q}from"./BludaOknoRedaktirovania-aefbab0a.js";import{Z as H}from"./ZakazZvonkaModal-991076c1.js";import{a as J}from"./VTable-0c38b32b.js";import"./store-f43c43ae.js";import"./store-f7edbe06.js";import"./VTooltip-9afbc9f4.js";const Q={name:"ZakazOptModal",setup(){return{zakaz:M()}},computed:{timeSelect(){return["07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00"]}}},W={class:"px-3 py-5 bg-grey-lighten-5 mb-3"},X={class:"app-poisk"},Y={class:"app-poisk"},$={class:"app-poisk"},aa={class:"d-flex align-self-center mb-3"},ea={class:"app-poisk"},ta={class:"app-poisk"},la={class:"mt-3"},oa={class:"py-3"},na={class:"px-3"},sa={class:"d-flex py-3 border-b"},da={class:"me-3 align-self-center justify-center"},ra={key:1,class:"h1 text-center px-2 py-4 br-100 bg-white"},ia={class:"me-3 align-self-center justify-center"},ua={class:"mb-2"},ma={class:"d-flex mb-3 ms-auto align-self-center justify-center"},pa={class:"w-100"},ca={class:"d-flex w-100"};function za(v,a,S,l,f,p){return d(),b(A,{modelValue:l.zakaz.showOptModal,"onUpdate:modelValue":a[13]||(a[13]=t=>l.zakaz.showOptModal=t),scrollable:"",width:"600","max-height":"500"},{default:n(()=>[o(j,{color:"",class:"br-15"},{default:n(()=>[o(O,{color:"primary"},{default:n(()=>[o(K,null,{default:n(()=>a[14]||(a[14]=[u("Оформить заказ")])),_:1}),o(k,{icon:"mdi-close",onClick:a[0]||(a[0]=t=>l.zakaz.showOptModal=!1)})]),_:1}),o(R,{class:"px-0 py-0"},{default:n(()=>[e("div",W,[e("div",X,[a[15]||(a[15]=e("label",null,"Ваше ФИО*",-1)),o(V,{onKeydown:a[1]||(a[1]=y(t=>l.zakaz.saveOpt(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3 bez-label",variant:"outlined",modelValue:l.zakaz.optDvData.klient,"onUpdate:modelValue":a[2]||(a[2]=t=>l.zakaz.optDvData.klient=t)},null,8,["modelValue"])]),e("div",Y,[a[16]||(a[16]=e("label",null,"Адрес*",-1)),o(V,{onKeydown:a[3]||(a[3]=y(t=>l.zakaz.saveOpt(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3 bez-label",variant:"outlined",modelValue:l.zakaz.optDvData.address,"onUpdate:modelValue":a[4]||(a[4]=t=>l.zakaz.optDvData.address=t)},null,8,["modelValue"])]),e("div",$,[a[18]||(a[18]=e("label",null,"Время доставки",-1)),e("div",aa,[o(U,{class:"mb-2",label:"",items:p.timeSelect,modelValue:l.zakaz.optDvData.vremiaS,"onUpdate:modelValue":a[5]||(a[5]=t=>l.zakaz.optDvData.vremiaS=t),variant:"underlined",clearable:!0,placeholder:"с"},null,8,["items","modelValue"]),a[17]||(a[17]=e("div",{class:"align-self-center mx-2"},"—",-1)),o(U,{class:"mb-2",label:"",items:p.timeSelect,modelValue:l.zakaz.optDvData.vremiaPo,"onUpdate:modelValue":a[6]||(a[6]=t=>l.zakaz.optDvData.vremiaPo=t),variant:"underlined",clearable:!0,placeholder:"по"},null,8,["items","modelValue"])])]),e("div",ea,[a[19]||(a[19]=e("label",null,"Телефон*",-1)),o(V,{onKeydown:a[7]||(a[7]=y(t=>l.zakaz.saveOpt(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3 bez-label",variant:"outlined",modelValue:l.zakaz.optDvData.phone,"onUpdate:modelValue":a[8]||(a[8]=t=>l.zakaz.optDvData.phone=t)},null,8,["modelValue"])]),e("div",ta,[a[20]||(a[20]=e("label",null,"Email*",-1)),o(V,{onKeydown:a[9]||(a[9]=y(t=>l.zakaz.saveOpt(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3 bez-label",variant:"outlined",modelValue:l.zakaz.optDvData.email,"onUpdate:modelValue":a[10]||(a[10]=t=>l.zakaz.optDvData.email=t)},null,8,["modelValue"])]),e("div",la,[a[21]||(a[21]=e("label",null,"Примечание",-1)),o(G,{rows:"2",class:"py-0",variant:"outlined",modelValue:l.zakaz.optDvData.primechanie,"onUpdate:modelValue":a[11]||(a[11]=t=>l.zakaz.optDvData.primechanie=t)},null,8,["modelValue"])])]),e("div",oa,[e("div",na,[(d(!0),m(_,null,D(l.zakaz.optDvData.items,t=>(d(),m("div",{key:t},[e("div",sa,[e("div",da,[t.bludo.photo?(d(),b(T,{key:0,width:"40",src:t.bludo.photo,class:"br-100 elevation-1"},null,8,["src"])):(d(),m("div",ra,[o(x,{icon:"mdi-camera",color:"secondary",size:"large"})]))]),e("div",ia,[e("div",null,[e("b",null,r(t.bludo.nazvanie),1)]),e("div",ua,r(t.bludo.stoimost)+" руб.",1),e("div",null,[o(w,{color:"primary",size:"small"},{default:n(()=>[u(r(new Date(t.date).toLocaleDateString("ru-RU")),1)]),_:2},1024)])]),e("div",ma,[o(k,{color:"secondary",size:"small",class:"br-20 me-4 align-self-center justify-center",onClick:c=>l.zakaz.decOptZakaz(t.bludo,t.date)},{default:n(()=>[o(x,{icon:"mdi-minus"})]),_:2},1032,["onClick"]),o(V,{modelValue:l.zakaz.optInput[`${t.date}--${t.bludo.id}`],"onUpdate:modelValue":c=>l.zakaz.optInput[`${t.date}--${t.bludo.id}`]=c,type:"number",id:`opt-input-${t.date}--${t.bludo.id}`,onChange:c=>l.zakaz.changOptZakaz(t.bludo,t.date,c),step:"1",class:"w-50px br-20 pb-3 text-center",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","id","onChange"]),o(k,{color:"secondary",size:"small",class:"br-20 ms-4 align-self-center justify-center",onClick:c=>l.zakaz.incOptZakaz(t.bludo,t.date)},{default:n(()=>[o(x,{icon:"mdi-plus"})]),_:2},1032,["onClick"])])])]))),128))])])]),_:1}),o(O,{color:"",class:"pb-0 mb-0 pe-4 ps-4 py-5"},{default:n(()=>[e("div",pa,[e("div",ca,[e("div",null,[e("h2",null,[e("b",null," Итого: "+r(l.zakaz.optSumItogo)+" руб.",1)])]),o(k,{elevation:"3",color:"primary",variant:"flat",onClick:a[12]||(a[12]=t=>l.zakaz.saveOpt()),class:"ms-auto br-20 px-5"},{default:n(()=>a[22]||(a[22]=[u(" Заказать ")])),_:1})]),a[23]||(a[23]=e("div",{class:"mt-1 mb-3 text-center text-grey-darken-1"},'Нажимая "Заказать" Вы даете согласие на обработку персональных данных ',-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const ba=P(Q,[["render",za],["__scopeId","data-v-e7da3a58"]]),va={components:{ZakazZvonkaModal:H,BludaOknoRedaktirovania:q,ZakazOptModal:ba,MenuCard:E},setup(){const v=B(),a=M(),S=F();return{core:v,zakaz:a,menu:S}},data(){return{selectionChipDate:0}},methods:{async changeDate(v,a){this.menu.searchAndSort.dateS=v.toISOString().slice(0,10),this.menu.searchAndSort.datePo=a.toISOString().slice(0,10),await this.menu.getLvData(),window.scrollTo(0,0)}},created(){this.menu.searchAndSort.isPp=!1,this.zakaz.optDvData={items:{}},this.zakaz.optInput={},this.menu.reseatSearch(),this.menu.getLvData()},computed:{dateSLabel(){return this.menu.searchAndSort.dateS?new Date(this.menu.searchAndSort.dateS).toLocaleDateString("ru-RU"):"-"},datePoLabel(){return this.menu.searchAndSort.datePo?new Date(this.menu.searchAndSort.datePo).toLocaleDateString("ru-RU"):"-"}}},ka={class:"flex-1-1 position-relative bg-grey-lighten-4 mb-5"},fa={class:"h-100"},Va={class:"bg-white"},Da={class:"mb-3"},_a={class:"mb-7"},ya={class:"mb-3"},ga={class:"bg-white py-3"},Sa={class:"text-end d-flex justify-end mb-3"},xa={class:"text-end"},Ca={class:"font-weight-medium"},ha={class:"mb-5 mt-3 d-flex w-100 justify-end"};function wa(v,a,S,l,f,p){const t=g("menu-card"),c=g("zakaz-opt-modal"),Z=g("zakaz-zvonka-modal"),I=g("bluda-okno-redaktirovania");return d(),m("div",ka,[e("div",fa,[e("div",Va,[o(C,null,{default:n(()=>[a[7]||(a[7]=e("div",{class:"d-flex"},[e("h1",{class:"mb-5 me-auto"},"Сделать оптовый заказ")],-1)),e("div",Da,[a[4]||(a[4]=u(" Здравствуйте! Вашему вниманию предлагается меню Коваль Лайт на неделю ")),e("b",null,r(p.dateSLabel)+" - "+r(p.datePoLabel),1)]),e("div",_a,[a[6]||(a[6]=u(" Выберите блюда, укажите их количество и нажмите кнопку ")),o(k,{size:"small",onClick:a[0]||(a[0]=s=>l.zakaz.openOptModal()),class:"br-20",variant:"flat",color:"primary"},{default:n(()=>a[5]||(a[5]=[u("Заказать ")])),_:1})]),e("div",ya,[o(L,{"selected-class":"text-primary",mandatory:"",class:"mb-0 pb-0 d-block",modelValue:f.selectionChipDate,"onUpdate:modelValue":a[1]||(a[1]=s=>f.selectionChipDate=s)},{default:n(()=>[(d(!0),m(_,null,D(l.menu.datiNaChetiriNedeli,s=>(d(),b(w,{key:s,class:"mb-3",onClick:i=>p.changeDate(s.dateS,s.datePo)},{default:n(()=>{var i,z;return[u(r((i=s.dateS)==null?void 0:i.toLocaleDateString("ru-RU"))+" - "+r((z=s.datePo)==null?void 0:z.toLocaleDateString("ru-RU")),1)]}),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),o(C,{class:"mb-10"},{default:n(()=>[(d(!0),m(_,null,D(l.menu.lvData,s=>(d(),b(N,null,{default:n(()=>{var i;return[o(h,{cols:"12"},{default:n(()=>[e("h1",null,r(s.dateLabel),1)]),_:2},1024),((i=s.bluda)==null?void 0:i.length)>0?(d(!0),m(_,{key:0},D(s.bluda,z=>(d(),b(h,{cols:"12",sm:"6",md:"4",lg:"3"},{default:n(()=>[o(t,{rezemPokupki:!0,date:s.date,item:z},null,8,["date","item"])]),_:2},1024))),256)):(d(),b(h,{key:1,cols:"12"},{default:n(()=>[o(J,{icon:"$info",class:"br-20",color:"secondary",variant:"tonal",elevation:4},{default:n(()=>a[8]||(a[8]=[e("b",null,"На этот день нет блюд",-1)])),_:1})]),_:1}))]}),_:2},1024))),256))]),_:1}),e("div",ga,[o(C,null,{default:n(()=>[e("div",Sa,[o(L,{"selected-class":"text-primary",mandatory:"",class:"mb-0 pb-0 d-block",modelValue:f.selectionChipDate,"onUpdate:modelValue":a[2]||(a[2]=s=>f.selectionChipDate=s)},{default:n(()=>[(d(!0),m(_,null,D(l.menu.datiNaChetiriNedeli,s=>(d(),b(w,{key:s,class:"mb-3",onClick:i=>p.changeDate(s.dateS,s.datePo)},{default:n(()=>{var i,z;return[u(r((i=s.dateS)==null?void 0:i.toLocaleDateString("ru-RU"))+" - "+r((z=s.datePo)==null?void 0:z.toLocaleDateString("ru-RU")),1)]}),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])]),e("div",xa,[e("h2",Ca,[e("b",null,"Итого: "+r(l.zakaz.optSumItogo)+" руб.",1)])]),e("div",ha,[o(k,{onClick:a[3]||(a[3]=s=>l.zakaz.openOptModal()),class:"br-20 px-10",variant:"flat",color:"primary"},{default:n(()=>a[9]||(a[9]=[u("Заказать")])),_:1})])]),_:1})]),o(c),o(Z),o(I)])])}const Na=P(va,[["render",wa]]);export{Na as default};
