import{K as p,a8 as q,aa as E,ao as Q,ac as G,ae as H,O as J,ap as Z,P as $,Q as aa,R as j,aq as ea,W as la,ar as ta,as as oa,at as da,Y as na,au as sa,d as l,av as ia,I as ra,aw as ua,D as A,j as P,_ as h,a as O,o,c as i,k as v,l as u,h as f,w as d,b as n,F as N,g as W,i as C,y as B,f as g,e as T,u as ba,r as U,t as y,p as va,m as ma,s as ca}from"./index-3559784b.js";import{u as F,e as fa,a as ya,V as I,c as ga}from"./VToolbar-64f8fe14.js";import{u as ka}from"./store-a7d3695b.js";import{V as D,b as Y,a as K}from"./VSelect-091fc47b.js";import{V as Va,a as Da}from"./VTable-074c8331.js";const wa=p({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:q,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...E(),...Q({location:"top end"}),...G(),...H(),...J(),...Z({transition:"scale-rotate-transition"})},"VBadge"),X=$()({name:"VBadge",inheritAttrs:!1,props:wa(),setup(t,a){const{backgroundColorClasses:c,backgroundColorStyles:e}=aa(j(t,"color")),{roundedClasses:x}=ea(t),{t:S}=la(),{textColorClasses:s,textColorStyles:w}=ta(j(t,"textColor")),{themeClasses:_}=oa(),{locationStyles:r}=da(t,!0,b=>(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(b)?+(t.offsetY??0):["left","right"].includes(b)?+(t.offsetX??0):0));return na(()=>{const b=Number(t.content),k=!t.max||isNaN(b)?t.content:b<=+t.max?b:`${t.max}+`,[m,z]=sa(a.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(t.tag,A({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline},t.class]},z,{style:t.style}),{default:()=>{var V,R;return[l("div",{class:"v-badge__wrapper"},[(R=(V=a.slots).default)==null?void 0:R.call(V),l(ia,{transition:t.transition},{default:()=>{var L,M;return[ra(l("span",A({class:["v-badge__badge",_.value,c.value,x.value,s.value],style:[e.value,w.value,t.inline?{}:r.value],"aria-atomic":"true","aria-label":S(t.label,b),"aria-live":"polite",role:"status"},m),[t.dot?void 0:a.slots.badge?(M=(L=a.slots).badge)==null?void 0:M.call(L):t.icon?l(P,{icon:t.icon},null):k]),[[ua,t.modelValue]])]}})])]}})}),{}}}),_a={setup(){const t=O(),a=ka(),c=F();return{core:t,ingridient:a,bluda:c}}},Ba={key:0,class:"mb-0"},Ca={class:"ps-0"},xa={class:""},Sa={colspan:"3"};function za(t,a,c,e,x,S){var s,w,_,r,b,k;return o(),i(N,null,[((w=(s=e.bluda.dvData)==null?void 0:s.sostav)==null?void 0:w.length)>0||!e.bluda.readOnly?(o(),i("h3",Ba,[l(X,{dot:"",inline:"",color:"primary"}),a[2]||(a[2]=v("Состав"))])):u("",!0),((r=(_=e.bluda.dvData)==null?void 0:_.sostav)==null?void 0:r.length)>0?(o(),f(Va,{key:1,class:"text-body-2 cursor-pointer w-100 text-center"},{default:d(()=>[a[4]||(a[4]=n("thead",null,[n("tr",null,[n("th",{class:"ps-0 w-50"},[n("b",null,"Ингридиент")]),n("th",{class:"w-30"},[n("b",null,"Количество")]),n("th",{class:"w-20 text-center"},[n("b",null,"Действие")])])],-1)),n("tbody",null,[(o(!0),i(N,null,W(e.bluda.dvData.sostav,(m,z)=>(o(),i("tr",{key:z},[n("td",Ca,[l(fa,{class:"mb-2",label:"",type:"text",name:"ingridient",modelValue:m.ingredient,"onUpdate:modelValue":V=>m.ingredient=V,"item-title":"nazvanie","item-value":"id",variant:"underlined",items:e.ingridient.lvData},null,8,["modelValue","onUpdate:modelValue","items"])]),n("td",xa,[l(D,{class:"pt-0 br-20 mb-3",variant:"underlined",modelValue:m.kolichestvo,"onUpdate:modelValue":V=>m.kolichestvo=V},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[l(C,{size:"small",color:"secondary",class:"br-20",elevation:"3",onClick:V=>e.bluda.dvData.sostav.splice(z,1)},{default:d(()=>[l(P,{icon:"mdi-delete"})]),_:2},1032,["onClick"])])]))),128)),n("tr",null,[n("td",Sa,[l(C,{elevation:"3",size:"small",variant:"tonal",color:"primary",class:"br-20 px-5",onClick:a[0]||(a[0]=m=>e.bluda.dvData.sostav.push({}))},{default:d(()=>[l(P,{icon:"mdi-plus"}),a[3]||(a[3]=n("b",null,"Добавить",-1))]),_:1})])])])]),_:1})):u("",!0),!(((k=(b=e.bluda.dvData)==null?void 0:b.sostav)==null?void 0:k.length)>0)&&!e.bluda.readOnly?(o(),f(Da,{key:2,icon:"$info",class:"br-20",color:"secondary",variant:"tonal",elevation:4},{default:d(()=>[a[6]||(a[6]=n("b",null,"Состав блюда не указан",-1)),l(C,{size:"small",variant:"tonal",color:"primary",class:"br-20 ms-3",onClick:a[1]||(a[1]=m=>e.bluda.dvData.sostav.push({}))},{default:d(()=>a[5]||(a[5]=[v("Указать ")])),_:1})]),_:1})):u("",!0)],64)}const Ta=h(_a,[["render",za]]),Pa={setup(){const t=O(),a=F(),c=ya();return{core:t,bluda:a,kategoriaBluda:c}}};function Na(t,a,c,e,x,S){return o(),i(N,null,[l(D,{onKeydown:a[0]||(a[0]=B(s=>e.bluda.save(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"*Название",modelValue:e.bluda.dvData.nazvanie,"onUpdate:modelValue":a[1]||(a[1]=s=>e.bluda.dvData.nazvanie=s)},null,8,["modelValue"]),l(Y,{class:"mb-2",label:"Категория","item-title":"nazvanie","item-value":"id",variant:"underlined",modelValue:e.bluda.dvData.kategoriaBluda,"onUpdate:modelValue":a[2]||(a[2]=s=>e.bluda.dvData.kategoriaBluda=s),items:e.kategoriaBluda.lvData},null,8,["modelValue","items"]),l(Y,{"item-title":"name","item-value":"id",class:"pt-0 br-20 mb-2",variant:"underlined",label:"Постное",items:e.core.yesNoList,modelValue:e.bluda.dvData.isPostnoeBludo,"onUpdate:modelValue":a[3]||(a[3]=s=>e.bluda.dvData.isPostnoeBludo=s)},null,8,["items","modelValue"]),l(D,{onKeydown:a[4]||(a[4]=B(s=>e.bluda.save(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"*Стоимость",modelValue:e.bluda.dvData.stoimost,"onUpdate:modelValue":a[5]||(a[5]=s=>e.bluda.dvData.stoimost=s)},null,8,["modelValue"]),l(D,{onKeydown:B(e.bluda.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Калорийность",modelValue:e.bluda.dvData.kaloriinost,"onUpdate:modelValue":a[6]||(a[6]=s=>e.bluda.dvData.kaloriinost=s)},null,8,["onKeydown","modelValue"]),l(T,null,{default:d(()=>[l(g,{cols:"12",md:"4"},{default:d(()=>[l(D,{onKeydown:B(e.bluda.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Белки",modelValue:e.bluda.dvData.belki,"onUpdate:modelValue":a[7]||(a[7]=s=>e.bluda.dvData.belki=s)},null,8,["onKeydown","modelValue"])]),_:1}),l(g,{cols:"12",md:"4"},{default:d(()=>[l(D,{onKeydown:B(e.bluda.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Жиры",modelValue:e.bluda.dvData.ziri,"onUpdate:modelValue":a[8]||(a[8]=s=>e.bluda.dvData.ziri=s)},null,8,["onKeydown","modelValue"])]),_:1}),l(g,{cols:"12",md:"4"},{default:d(()=>[l(D,{onKeydown:B(e.bluda.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Углеводы",modelValue:e.bluda.dvData.uglevodi,"onUpdate:modelValue":a[9]||(a[9]=s=>e.bluda.dvData.uglevodi=s)},null,8,["onKeydown","modelValue"])]),_:1})]),_:1})],64)}const Ua=h(Pa,[["render",Na]]),Ka={setup(){const t=O(),a=F(),c=ba();return{core:t,bluda:a,user:c}},components:{BludaOsnovniePolia:Ua,BludaSostavTable:Ta},mounted(){this.user.userData.isFranchisee&&(this.bluda.readOnly=!0)}},ha={key:0},Oa=["src"],Fa={class:"mt-2"},Ra={key:2,class:"w-100 py-3 text-center embed-responsive-4by3 border br-20 default elevation-1"},La={key:0,class:"px-0 mx-0 w-100"},Ma={key:0},ja=["src"],Aa={key:1,class:"w-100 py-3 cursor-pointer text-center embed-responsive-4by3 border br-20 default elevation-1"},Ia={class:"d-flex"},Ya={key:1},Wa={class:"mb-2 text-h4 mb-5 font-weight-bold"},Xa={key:0,class:"mb-2 text-h6"},pa={key:1,class:"mb-2 text-h6"},qa={key:2,class:"mb-2 text-h6"},Ea={key:3,class:"mb-2 text-h6"},Qa={key:0},Ga={class:"border-b py-2"},Ha={key:0,class:"mt-7 mb-10"};function Ja(t,a,c,e,x,S){const s=U("default"),w=U("bluda-osnovnie-polia"),_=U("bluda-sostav-table");return o(),f(ca,{modelValue:e.bluda.showBaseModal,"onUpdate:modelValue":a[6]||(a[6]=r=>e.bluda.showBaseModal=r),scrollable:"",width:"600"},{default:d(()=>[l(ma,{color:"",class:"br-15"},{default:d(()=>[l(I,{color:"primary"},{default:d(()=>[l(ga,null,{default:d(()=>[v(y(e.bluda.baseModalTitle),1)]),_:1}),l(C,{icon:"mdi-close",onClick:a[0]||(a[0]=r=>e.bluda.showBaseModal=!1)})]),_:1}),l(va,{class:"pb-5"},{default:d(()=>[l(T,null,{default:d(()=>[e.bluda.readOnly?u("",!0):(o(),f(g,{key:0,cols:"12",md:"12"},{default:d(()=>[n("input",{accept:"image/*",type:"file",ref:"failField",class:"d-none",onChange:a[1]||(a[1]=r=>e.bluda.updatePhoto(e.bluda.dvData.id,t.$refs.failField))},null,544),e.bluda.dvData.photo?(o(),i("div",ha,[n("img",{onClick:a[2]||(a[2]=r=>t.$refs.failField.click()),class:"br-20 w-100 cursor-pointer elevation-3",src:e.bluda.dvData.photo},null,8,Oa),n("div",Fa,[l(C,{class:"w-100 br-15",size:"default",variant:"tonal",color:"secondary",onClick:a[3]||(a[3]=r=>e.bluda.deletePhoto(e.bluda.dvData.id))},{default:d(()=>[l(P,{icon:"mdi-delete"})]),_:1})])])):e.bluda.dvData.id?(o(),i("div",{key:1,onClick:a[4]||(a[4]=r=>t.$refs.failField.click()),class:"w-100 py-3 cursor-pointer text-center embed-responsive-4by3 border br-20 default elevation-1"}," Фото нет ")):(o(),i("div",Ra,[l(s,null,{default:d(()=>a[7]||(a[7]=[v("Фото можно будет добавить после сохранения ")])),_:1})]))]),_:1})),l(g,{cols:"12"},{default:d(()=>[e.bluda.readOnly?(o(),i("div",La,[e.bluda.dvData.photo?(o(),i("div",Ma,[n("img",{class:"br-20 w-100 cursor-pointer",src:e.bluda.dvData.photo},null,8,ja)])):(o(),i("div",Aa," Фото нет "))])):u("",!0)]),_:1})]),_:1}),l(T,null,{default:d(()=>[e.bluda.readOnly?(o(),f(g,{key:0,cols:"12",md:"12"},{default:d(()=>[n("div",Ia,[e.bluda.dvData.kategoriaBludaNazvanie?(o(),f(K,{key:0,size:"large",variant:"outlined",class:"px-5 font-weight-bold w-50 me-3 justify-center",color:"primary",elevation:"3"},{default:d(()=>[v(y(e.bluda.dvData.kategoriaBludaNazvanie),1)]),_:1})):u("",!0),e.bluda.dvData.isPostnoeBludo?(o(),f(K,{key:1,size:"large",variant:"elevated",class:"px-5 font-weight-bold w-50 justify-center",color:"primary",elevation:"3"},{default:d(()=>a[8]||(a[8]=[v("Постное ")])),_:1})):(o(),f(K,{key:2,size:"large",variant:"elevated",color:"secondary",class:"px-5 w-50 font-weight-bold justify-center",elevation:"3"},{default:d(()=>a[9]||(a[9]=[v("Не постное ")])),_:1}))])]),_:1})):u("",!0),l(g,{cols:"12",md:"12"},{default:d(()=>[e.bluda.readOnly?(o(),i("div",Ya,[l(T,null,{default:d(()=>[l(g,{cols:"12",md:"6"},{default:d(()=>[n("h2",Wa,y(e.bluda.dvData.nazvanie),1),e.bluda.dvData.kaloriinost?(o(),i("div",Xa,[a[10]||(a[10]=n("b",null,"Калорийность",-1)),v(": "+y(e.bluda.dvData.kaloriinost)+" ккл. ",1)])):u("",!0),e.bluda.dvData.belki?(o(),i("div",pa,[a[11]||(a[11]=n("b",null,"Белки",-1)),v(": "+y(e.bluda.dvData.belki)+" г.",1)])):u("",!0),e.bluda.dvData.ziri?(o(),i("div",qa,[a[12]||(a[12]=n("b",null,"Жиры",-1)),v(": "+y(e.bluda.dvData.ziri)+" г.",1)])):u("",!0),e.bluda.dvData.uglevodi?(o(),i("div",Ea,[a[13]||(a[13]=n("b",null,"Углеводы",-1)),v(": "+y(e.bluda.dvData.uglevodi)+" г. ",1)])):u("",!0)]),_:1}),l(g,{cols:"12",md:"6"},{default:d(()=>{var r,b,k;return[((b=(r=e.bluda.dvData)==null?void 0:r.sostav)==null?void 0:b.length)>0?(o(),i("div",Qa,[a[14]||(a[14]=n("h2",{class:"text-h5 font-weight-bold"},"Состав",-1)),(o(!0),i(N,null,W((k=e.bluda.dvData)==null?void 0:k.sostav,m=>(o(),i("div",Ga,[l(X,{dot:"",inline:"",color:"primary"}),v(" "+y(m.ingredientTitle)+": "+y(m.kolichestvo),1)]))),256))])):u("",!0)]}),_:1})]),_:1})])):(o(),f(w,{key:0}))]),_:1})]),_:1}),e.bluda.readOnly?u("",!0):(o(),i("div",Ha,[l(_)]))]),_:1}),e.bluda.readOnly?u("",!0):(o(),f(I,{key:0,color:"",class:"pb-0 mb-0"},{default:d(()=>[l(C,{elevation:"3",color:"primary",variant:"flat",onClick:a[5]||(a[5]=r=>e.bluda.save()),class:"ms-auto br-20"},{default:d(()=>a[15]||(a[15]=[v(" Сохранить ")])),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue"])}const te=h(Ka,[["render",Ja]]);export{te as B,X as V};
