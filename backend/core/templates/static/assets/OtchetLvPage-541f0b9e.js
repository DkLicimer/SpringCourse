import{a as b,q as _,L as g,C as h,_ as V,o as y,c as C,b as a,d as t,w as l,V as D,m as n,p as d,i as c,k as x,e as S,f as i,t as u}from"./index-51defc55.js";import{b as k,V as f}from"./VSelect-0c4809ec.js";const v=b(),z=_("report",{state:()=>({lvData:{klientVsego:0,zakazZaPeriod:0,zakazovIspolneno:0,zakazovOtmeneno:0,zakazovNovih:0,pribilVsego:0,pribilPoNaboram:0,pribilPoBludam:0}}),actions:{async apply(m,e){v.modalLoad=!0;try{const p=await fetch(g.urls.report+"/get",{method:"post",body:JSON.stringify({startDate:m,endDate:e}),headers:h.getHeader()});if(p.ok){const r=await p.json();console.log("Response from server:",r),this.lvData=r}else v.showAlertError("Ошибка. Подробности в консоли или в логах"),console.error("Server response error:",p.statusText)}catch(p){v.showAlertError("Произошла ошибка при получении данных"),console.error("Fetch error:",p)}finally{v.modalLoad=!1}},async reseatSearch(){await this.apply(null,null)}}}),E={setup(){const m=b(),e=z();return{core:m,reportCounts:e}},async created(){this.$emit("loadComplete"),await this.reportCounts.reseatSearch()},data(){return{url:g.urls.otcheti,dateStart:"",dateEnd:"",dateStartDashboard:"",dateEndDashboard:"",report:"",reportType:[{name:"Отчет по исключениям",id:"alergia_otchet"},{name:"Отчет по прибыли (клиенты/блюда)",id:"pribil_otchet"}]}}},N={class:"flex-1-1 position-relative"},w={class:"d-flex flex-1-1 align-items-center h-100"},P={class:"d-flex"},B={class:"d-flex"},L={class:"text-h2"},O={class:"text-h2"},T={class:"text-h2"},U={class:"text-h2"},A={class:"text-h2"},F={class:"text-h2"},I={class:"text-h2"},R={class:"text-h2"};function H(m,e,p,r,o,J){return y(),C("div",N,[a("div",w,[t(D,{class:"mb-10"},{default:l(()=>[e[16]||(e[16]=a("h1",null,"Отчеты",-1)),t(n,{elevation:"3",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7"},{default:l(()=>[a("div",P,[t(k,{"item-title":"name","item-value":"id",items:o.reportType,modelValue:o.report,"onUpdate:modelValue":e[0]||(e[0]=s=>o.report=s),variant:"underlined",class:"me-4"},null,8,["items","modelValue"]),t(f,{type:"date",variant:"underlined",label:"период с",class:"me-4",modelValue:o.dateStart,"onUpdate:modelValue":e[1]||(e[1]=s=>o.dateStart=s)},null,8,["modelValue"]),t(f,{type:"date",variant:"underlined",label:"период по",modelValue:o.dateEnd,"onUpdate:modelValue":e[2]||(e[2]=s=>o.dateEnd=s)},null,8,["modelValue"])]),t(c,{class:"mt-5 br-15",color:"primary",target:"_blank",href:`${o.url}?date_start=${o.dateStart}&date_end=${o.dateEnd}&report=${o.report}`},{default:l(()=>e[6]||(e[6]=[x("Сформировать ")])),_:1},8,["href"])]),_:1})]),_:1}),t(n,{elevation:"3",class:"br-15 mt-5"},{default:l(()=>[t(d,{class:"px-7 py-7"},{default:l(()=>[a("div",B,[t(f,{type:"date",variant:"underlined",label:"период с",class:"me-4",modelValue:o.dateStartDashboard,"onUpdate:modelValue":e[3]||(e[3]=s=>o.dateStartDashboard=s)},null,8,["modelValue"]),t(f,{type:"date",variant:"underlined",label:"период по",modelValue:o.dateEndDashboard,"onUpdate:modelValue":e[4]||(e[4]=s=>o.dateEndDashboard=s)},null,8,["modelValue"]),t(c,{class:"ms-5 br-15",color:"primary",onClick:e[5]||(e[5]=s=>r.reportCounts.apply(o.dateStartDashboard,o.dateEndDashboard))},{default:l(()=>e[7]||(e[7]=[x("Применить ")])),_:1})])]),_:1})]),_:1}),t(S,{class:"mt-5"},{default:l(()=>[t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",L,u(r.reportCounts.lvData.klientVsego),1),e[8]||(e[8]=a("div",null,"Клиентов всего",-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",O,u(r.reportCounts.lvData.pribilVsego),1),e[9]||(e[9]=a("div",null,"Прибыль",-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",T,u(r.reportCounts.lvData.pribilPoNaboram),1),e[10]||(e[10]=a("div",null,"Прибыль по наборам",-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",U,u(r.reportCounts.lvData.pribilPoBludam),1),e[11]||(e[11]=a("div",null,"Прибыль по блюдам",-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",A,u(r.reportCounts.lvData.zakazZaPeriod),1),e[12]||(e[12]=a("div",null,"Заказов",-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",F,u(r.reportCounts.lvData.zakazovIspolneno),1),e[13]||(e[13]=a("div",null,'Заказов со статусом "Исполнено"',-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",I,u(r.reportCounts.lvData.zakazovOtmeneno),1),e[14]||(e[14]=a("div",null,'Заказов со статусом "Отменено"',-1))]),_:1})]),_:1})]),_:1}),t(i,{md:"4",lg:"3"},{default:l(()=>[t(n,{elevation:"3",color:"green-lighten-5",class:"br-15"},{default:l(()=>[t(d,{class:"px-7 py-7 text-center"},{default:l(()=>[a("h1",R,u(r.reportCounts.lvData.zakazovNovih),1),e[15]||(e[15]=a("div",null,'Заказов со статусом "Новый"',-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])}const q=V(E,[["render",H]]);export{q as default};
