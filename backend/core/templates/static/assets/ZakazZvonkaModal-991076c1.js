import{_ as h,o as c,c as v,D as b,a as V,L as _,C as w,r as k,d as l,w as m,m as z,p as x,b as s,i as p,y as C,k as f,s as y,F as g}from"./index-51defc55.js";import{V as D}from"./VSelect-0c4809ec.js";import{V as I}from"./VTooltip-9afbc9f4.js";const Z={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:t=>t.toLocaleUpperCase()},a:{pattern:/[a-zA-Z]/,transform:t=>t.toLocaleLowerCase()},"!":{escape:!0}},A={inheritAttrs:!1,props:{mask:{type:String,required:!0}},emits:["update:modelValue"],methods:{handleInput(t){const e=this.applyMask(t.target.value);t.target.value=e,this.$emit("update:modelValue",e)},applyMask(t){const e=[];let i=0,d=0;for(;i<t.length&&d<this.mask.length;){const a=this.mask[d],o=t[i],r=Z[a];if(r)if(r.escape)d++,e.push(t[i]),i++;else if(r.pattern.test(o)){const u=r.transform?r.transform(o):o;e.push(u),i++}else break;else e.push(a),a===o&&i++;d++}return e.join("")}}};function S(t,e,i,d,a,o){return c(),v("input",b({ref:"maskedInput"},t.$attrs,{onInput:e[0]||(e[0]=(...r)=>o.handleInput&&o.handleInput(...r))}),null,16)}const M=h(A,[["render",S]]);const L={components:{MaskInput:M},data(){return{isShow:!1,formData:{}}},setup(){return{core:V()}},methods:{async zakazatZvonok(){if(!this.formData.klientFio||!this.formData.klientPhone)return this.core.showAlertError("Заполните пожалуйста ФИО и телефон"),!1;if(this.formData.klientPhone.length<18)return this.core.showAlertError("Проверьте пожалуйста что телефон заполнен полностью"),!1;this.core.modalLoad=!0,(await fetch(_.urls.zakazZvonka,{method:"post",body:JSON.stringify(this.formData),headers:w.getHeader()})).status===200?(this.core.showModalInfo('<div class="mb-4">Спасибо за заказ!</div><div> Менеджер с Вами свяжется</div>'),this.isShow=!1,this.formData={}):this.core.showAlertError("Ошибка. Попробуйте пожалуйста еще раз"),this.core.modalLoad=!1}}},P={class:"d-flex mb-3"},F={class:"ms-auto"},N={class:"mb-3"},B={class:"app-poisk"},E={class:"app-poisk"},T={class:"text-end mt-5"};function U(t,e,i,d,a,o){const r=k("MaskInput"),u=k("router-link");return c(),v(g,null,[l(y,{modelValue:a.isShow,"onUpdate:modelValue":e[5]||(e[5]=n=>a.isShow=n),scrollable:"",width:"500","max-height":"500"},{default:m(()=>[l(z,{color:"",class:"br-15"},{default:m(()=>[l(x,{class:"px-5 pb-5"},{default:m(()=>[s("div",P,[e[7]||(e[7]=s("h1",null,"Заказать звонок",-1)),s("div",F,[l(p,{variant:"text",icon:"mdi-close",onClick:e[0]||(e[0]=n=>a.isShow=!1)})])]),e[13]||(e[13]=s("div",{class:"mb-5"},"Заполните пожалуйста форму и мы обязательно Вам перезвоним",-1)),s("div",N,[s("div",B,[e[8]||(e[8]=s("label",null,[s("b",null,"ФИО*")],-1)),l(D,{onKeydown:e[1]||(e[1]=C(n=>o.zakazatZvonok(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3 bez-label",variant:"outlined",modelValue:a.formData.klientFio,"onUpdate:modelValue":e[2]||(e[2]=n=>a.formData.klientFio=n)},null,8,["modelValue"])]),s("div",E,[e[9]||(e[9]=s("label",null,[s("b",null,"Телефон*")],-1)),s("div",null,[l(r,{class:"phone-input",modelValue:a.formData.klientPhone,"onUpdate:modelValue":e[3]||(e[3]=n=>a.formData.klientPhone=n),mask:"+7 (###) ###-##-##",placeholder:"+7"},null,8,["modelValue"])])])]),s("div",null,[e[11]||(e[11]=f(' Нажимая "Заказать звонок" Вы даете согласие на обработку ')),l(u,{class:"text-primary",target:"_blank",to:{name:"PrivacyPolicyPage"}},{default:m(()=>e[10]||(e[10]=[f("персональных данных")])),_:1})]),s("div",T,[l(p,{elevation:"3",color:"primary",variant:"flat",onClick:e[4]||(e[4]=n=>o.zakazatZvonok()),class:"ms-auto br-20"},{default:m(()=>e[12]||(e[12]=[f(" Заказать звонок ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(I,{text:"Заказать звонок"},{activator:m(({props:n})=>[l(p,b({onClick:e[6]||(e[6]=$=>a.isShow=!0)},n,{class:"btn-zakaz-zvonka",color:"secondary",variant:"elevated",icon:"mdi-phone"}),null,16)]),_:1})],64)}const j=h(L,[["render",U],["__scopeId","data-v-e2c0c5db"]]);export{M,j as Z};
