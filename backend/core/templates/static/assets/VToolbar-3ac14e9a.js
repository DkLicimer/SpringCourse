import{a as te,q as ae,L as m,C as g,K as se,a1 as z,X as M,b1 as $,aS as _e,Z as ue,b2 as Be,ax as Ee,ap as He,P as ce,W as Je,ai as j,$ as re,b3 as Re,ar as Ke,aK as ie,Y as he,d as o,F as Z,B as je,D as W,E as ze,G as me,j as ge,b4 as Ue,b0 as q,k as $e,b5 as Xe,aB as Ge,b6 as ye,an as De,aJ as Qe,aa as we,ae as pe,a9 as We,N as Ye,ac as Ze,O as qe,Q as et,R as tt,b7 as at,T as st,aq as lt,U as ot,ag as nt,aj as rt,v as it,aP as Y,b8 as dt}from"./index-2f65f0ea.js";import{k as ut,l as ct,n as ht,o as ft,V as be,p as vt,q as mt,a as gt}from"./VSelect-e26a844f.js";const de=te(),yt=ae("kategoriaBluda",{state:()=>({lvData:[]}),getters:{},actions:{async getLvData(){de.modalLoad=!0;const e=await fetch(m.urls.kategoriaBluda+"/get",{method:"post",headers:g.getHeader()});if(e.status===200){const a=await e.json();this.lvData=a.data}else de.showAlertError("Ошибка. Подробности в консоли или в логах");de.modalLoad=!1}}}),u=te(),Dt=ae("nabor",{state:()=>({lvData:[],searchAndSort:{sortName:"id",sortOrder:"down",isArchive:!1},dvData:{},showBaseModal:!1,pageCount:0,itemsCount:0}),getters:{tableHeader:e=>[{label:"Фото",name:"photo",type:"img",width:"50px"},{label:"Название",name:"nazvanie",orederName:"nazvanie",type:"char",width:"150px"},{label:"Блюда",name:"bludoTitle",type:"char",width:"100px"},{label:"Постное",name:"isPostnoeBludo",type:"bool",width:"100px"},{label:"Стоимость",name:"stoimost",orederName:"stoimost",type:"number",width:"70px"},{label:"Калорий",name:"kaloriinost",orederName:"kaloriinost",type:"number",width:"50px"},{label:"Белков",name:"belki",orederName:"belki",type:"number",width:"50px"},{label:"Жиров",name:"ziri",orederName:"ziri",type:"number",width:"50px"},{label:"Углеводов",name:"uglevodi",orederName:"uglevodi",type:"number",width:"50px"}],searchList:e=>[{type:"text",label:"Название",model:"nazvanie"}],baseModalTitle:e=>{var a,t;return(a=e.dvData)!=null&&a.nazvanie?(t=e.dvData)==null?void 0:t.nazvanie:"Новый набор"}},actions:{async getLvData(){u.modalLoad=!0;const e=await fetch(m.urls.nabor+"/get",{method:"post",body:JSON.stringify(this.searchAndSort),headers:g.getHeader()});if(e.status===200){const a=await e.json();this.lvData=a.data,this.pageCount=a.pageCount,this.itemsCount=a.itemsCount}else u.showAlertError("Ошибка. Подробности в консоли или в логах");u.modalLoad=!1},async getDvData(e){u.modalLoad=!0;const a=await fetch(m.urls.nabor+"/get",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()});if(a.status===200){const t=await a.json();this.dvData=t.data}else u.showAlertError("Ошибка. Подробности в консоли или в логах");u.modalLoad=!1},async save(){u.modalLoad=!0;const e=await fetch(m.urls.nabor+"/save",{method:"post",body:JSON.stringify(this.dvData),headers:g.getHeader()});if(e.status===200){const t=(await e.json()).data.id;this.getLvData(),this.getDvData(t),ee().getLvData(),u.showAlertInfo("Готово")}else u.showAlertError("Ошибка. Подробности в консоли или в логах");u.modalLoad=!1},async updatePhoto(e,a){if(a.files.length===0)return!1;u.modalLoad=!0;let t=new FormData;t.append("photo",a.files[0]),t.append("nabor",e),(await fetch(m.urls.nabor+"/update_photo",{method:"post",body:t,credentials:"include",mode:"cors",headers:{"X-CSRFToken":g.getCookie("csrftoken")}})).status===200?(this.getLvData(),this.getDvData(e),ee().getLvData(),u.showAlertInfo("Готово")):u.showAlertError("Ошибка. Подробности в консоли или в логах"),u.modalLoad=!1},async copy(e){u.modalLoad=!0;const a=await fetch(m.urls.nabor+"/copy",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()});if(a.status===200){const l=(await a.json()).data.id;this.getLvData(),this.openBaseModal(l),u.showAlertInfo("Готово")}else u.showAlertError("Ошибка. Подробности в консоли или в логах");u.modalLoad=!1},async deletePhoto(e){confirm("Удалить фото?")&&(u.modalLoad=!0,(await fetch(m.urls.nabor+"/delete_photo",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()})).status===200?(this.getLvData(),this.getDvData(e),u.showAlertInfo("Готово")):u.showAlertError("Ошибка. Подробности в консоли или в логах"),u.modalLoad=!1)},async openBaseModal(e=null){e?await this.getDvData(e):this.dvData={items:[]},this.showBaseModal=!0},async updateSort(e){this.searchAndSort.sortName===e?this.searchAndSort.sortOrder==="up"?this.searchAndSort.sortOrder="down":(this.searchAndSort.sortName="id",this.searchAndSort.sortOrder="up"):(this.searchAndSort.sortName=e,this.searchAndSort.sortOrder="up"),this.getLvData()},async getAll(){this.searchAndSort.page=1,this.searchAndSort.showAll=!0,this.getLvData()},async delete(e){u.modalLoad=!0,(await fetch(m.urls.nabor+"/delete",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()})).status===200?(this.getLvData(),this.showBaseModal=!1,u.showAlertInfo("Готово")):u.showAlertError("Ошибка. Подробности в консоли или в логах"),u.modalLoad=!1},reseatSearch(){this.searchAndSort={sortName:"id",sortOrder:"down",isArchive:!1},this.getLvData()}}}),v=te(),bt=Dt(),ee=ae("menu",{state:()=>({lvData:[],isLoad:!1,updatePriceData:{},showBaseModal:!1,showChangePriceModal:!1,searchAndSort:{isArchive:!1,isPp:!1}}),getters:{searchList:e=>[{type:"date",label:"Дата с",model:"dateS",clearable:!1},{type:"date",label:"Дата по",model:"datePo",clearable:!1}],baseModalTitle:e=>e.dvData.id?"Заменить блюдо":"Заказ",datiNaChetiriNedeli:()=>{let e=new Date;if(e.getDay()===0||e.getDay()>=4){const a=new Date;e.getDay()===4?a.setDate(a.getDate()+4):e.getDay()===5?a.setDate(a.getDate()+3):e.getDay()===6?a.setDate(a.getDate()+2):e.getDay()===0&&a.setDate(a.getDate()+1),e=a}return[{dateS:new Date(e.setDate(e.getDate()-e.getDay()+1)),datePo:new Date(e.setDate(e.getDate()-e.getDay()+7))},{dateS:new Date(e.setDate(e.getDate()-e.getDay()+1)),datePo:new Date(e.setDate(e.getDate()-e.getDay()+7))},{dateS:new Date(e.setDate(e.getDate()-e.getDay()+1)),datePo:new Date(e.setDate(e.getDate()-e.getDay()+7))},{dateS:new Date(e.setDate(e.getDate()-e.getDay()+1)),datePo:new Date(e.setDate(e.getDate()-e.getDay()+7))}]}},actions:{async getLvData(){let e=new Date;if(e.getDay()===0||e.getDay()>=4){const t=new Date;e.getDay()===4?t.setDate(t.getDate()+4):e.getDay()===5?t.setDate(t.getDate()+3):e.getDay()===6?t.setDate(t.getDate()+2):e.getDay()===0&&t.setDate(t.getDate()+1),e=t}this.searchAndSort.dateS||(this.searchAndSort.dateS=new Date(e.setDate(e.getDate()-e.getDay()+1)).toISOString().slice(0,10)),this.searchAndSort.datePo||(this.searchAndSort.datePo=new Date(e.setDate(e.getDate()-e.getDay()+7)).toISOString().slice(0,10)),this.isLoad=!1;const a=await fetch(m.urls.menu+"/get",{method:"post",body:JSON.stringify(this.searchAndSort),headers:g.getHeader()});if(a.status===200){const t=await a.json();this.lvData=t.data,this.pageCount=t.pageCount,this.itemsCount=t.itemsCount}else v.showAlertError("Ошибка. Подробности в консоли или в логах");this.isLoad=!0},async getDvData(e){v.modalLoad=!0;const a=await fetch(m.urls.bludo+"/get",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()});if(a.status===200){const t=await a.json();this.dvData=t.data}else v.showAlertError("Ошибка. Подробности в консоли или в логах");v.modalLoad=!1},async save(e){v.modalLoad=!0;let a={isPp:this.searchAndSort.isPp};this.searchAndSort.isPp?a.naborId=e:a.bludoId=e;const t=await fetch(m.urls.menu+"/save",{method:"post",body:JSON.stringify({...this.dvData,...a}),headers:g.getHeader()});if(t.status===401){v.showAlertError("В этот день уже есть это блюдо=}"),v.modalLoad=!1;return}t.status===200?(this.getLvData(),this.showBaseModal=!1,v.showAlertInfo("Готово")):v.showAlertError("Ошибка. Подробности в консоли или в логах"),v.modalLoad=!1},async savePrice(){v.modalLoad=!0,(await fetch(m.urls.menu+"/save",{method:"post",body:JSON.stringify(this.updatePriceData),headers:g.getHeader()})).status===200?(this.getLvData(),this.showChangePriceModal=!1,v.showAlertInfo("Готово")):v.showAlertError("Ошибка. Подробности в консоли или в логах"),v.modalLoad=!1},async printMenu(){v.modalLoad=!0;const e=await fetch(m.urls.report+"/menu",{method:"post",body:JSON.stringify(this.searchAndSort),headers:g.getHeader()});e.status===200?open(e.url):v.showAlertError("Ошибка. Подробности в консоли или в логах"),v.modalLoad=!1},async openBaseModal(e,a=null){pt().reseatSearch(),bt.reseatSearch(),a?this.dvData={date:e,id:a}:this.dvData={date:e},this.showBaseModal=!0},openChangePriceModal(e,a){this.updatePriceData={date:e,stoimost:a},this.showChangePriceModal=!0},async reseatSearch(){let e=new Date;if(e.getDay()===0||e.getDay()>=4){const l=new Date;e.getDay()===4?l.setDate(l.getDate()+4):e.getDay()===5?l.setDate(l.getDate()+3):e.getDay()===6?l.setDate(l.getDate()+2):e.getDay()===0&&l.setDate(l.getDate()+1),e=l}const a=new Date(e.setDate(e.getDate()-e.getDay()+1)),t=new Date(e.setDate(e.getDate()-e.getDay()+7));this.searchAndSort.dateS=a.toISOString().slice(0,10),this.searchAndSort.datePo=t.toISOString().slice(0,10),await this.getLvData()},async updateSort(e){this.searchAndSort.sortName===e?this.searchAndSort.sortOrder==="up"?this.searchAndSort.sortOrder="down":(this.searchAndSort.sortName="id",this.searchAndSort.sortOrder="up"):(this.searchAndSort.sortName=e,this.searchAndSort.sortOrder="up"),this.getLvData()},async getAll(){this.searchAndSort.page=1,this.searchAndSort.showAll=!0,this.getLvData()},async delete(e){v.modalLoad=!0,(await fetch(m.urls.menu+"/delete",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()})).status===200?(this.getLvData(),this.showBaseModal=!1,v.showAlertInfo("Готово")):v.showAlertError("Ошибка. Подробности в консоли или в логах"),v.modalLoad=!1}}}),i=te(),wt=yt(),pt=ae("bluda",{state:()=>({lvData:[],dvData:{},showBaseModal:!1,pageCount:0,readOnly:!1,itemsCount:0,searchAndSort:{sortName:"id",sortOrder:"down",isArchive:!1}}),getters:{tableHeader:e=>[{label:"Фото",name:"photo",type:"img",width:"50px"},{label:"Название",name:"nazvanie",orederName:"nazvanie",type:"char",width:"150px"},{label:"Категория",name:"kategoriaBludaNazvanie",orederName:"kategoria_bluda__nazvanie",type:"char",width:"100px"},{label:"Постное",name:"isPostnoeBludo",orederName:"is_postnoe_bludo",type:"bool",width:"100px"},{label:"Стоимость",name:"stoimost",orederName:"stoimost",type:"number",width:"70px"},{label:"Калорий",name:"kaloriinost",orederName:"kaloriinost",type:"number",width:"50px"},{label:"Белков",name:"belki",orederName:"belki",type:"number",width:"50px"},{label:"Жиров",name:"ziri",orederName:"ziri",type:"number",width:"50px"},{label:"Углеводов",name:"uglevodi",orederName:"uglevodi",type:"number",width:"50px"}],searchList:e=>[{type:"text",label:"Название",model:"term"},{type:"select",label:"Категория",model:"kategoria",items:wt.lvData,itemTitle:"nazvanie",itemVaile:"id"},{type:"select",label:"Архивность",model:"isArchive",items:i.yesNoList,itemTitle:"name",itemVaile:"id"}],baseModalTitle:e=>{var a,t;return(a=e.dvData)!=null&&a.nazvanie?(t=e.dvData)==null?void 0:t.nazvanie:"Новое блюдо"}},actions:{async getLvData(){i.modalLoad=!0;const e=await fetch(m.urls.bludo+"/get",{method:"post",body:JSON.stringify(this.searchAndSort),headers:g.getHeader()});if(e.status===200){const a=await e.json();this.lvData=a.data,this.pageCount=a.pageCount,this.itemsCount=a.itemsCount}else i.showAlertError("Ошибка. Подробности в консоли или в логах");i.modalLoad=!1},async getDvData(e){i.modalLoad=!0;const a=await fetch(m.urls.bludo+"/get",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()});if(a.status===200){const t=await a.json();this.dvData=t.data}else i.showAlertError("Ошибка. Подробности в консоли или в логах");i.modalLoad=!1},async save(){i.modalLoad=!0;const e=await fetch(m.urls.bludo+"/save",{method:"post",body:JSON.stringify(this.dvData),headers:g.getHeader()});if(e.status===200){const t=(await e.json()).data.id;this.getLvData(),this.getDvData(t),ee().getLvData(),i.showAlertInfo("Готово")}else i.showAlertError("Ошибка. Подробности в консоли или в логах");i.modalLoad=!1},async copy(e){i.modalLoad=!0;const a=await fetch(m.urls.bludo+"/copy",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()});if(a.status===200){const l=(await a.json()).data.id;this.getLvData(),this.openBaseModal(l),i.showAlertInfo("Готово")}else i.showAlertError("Ошибка. Подробности в консоли или в логах");i.modalLoad=!1},async updatePhoto(e,a){if(a.files.length===0)return!1;i.modalLoad=!0;let t=new FormData;t.append("photo",a.files[0]),t.append("bludo",e),(await fetch(m.urls.bludo+"/update_photo",{method:"post",body:t,credentials:"include",mode:"cors",headers:{"X-CSRFToken":g.getCookie("csrftoken")}})).status===200?(this.getLvData(),this.getDvData(e),ee().getLvData(),i.showAlertInfo("Готово")):i.showAlertError("Ошибка. Подробности в консоли или в логах"),i.modalLoad=!1},async deletePhoto(e){confirm("Удалить фото?")&&(i.modalLoad=!0,(await fetch(m.urls.bludo+"/delete_photo",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()})).status===200?(this.getLvData(),this.getDvData(e),i.showAlertInfo("Готово")):i.showAlertError("Ошибка. Подробности в консоли или в логах"),i.modalLoad=!1)},async openBaseModal(e=null){e?await this.getDvData(e):this.dvData={sostav:[]},this.showBaseModal=!0},reseatSearch(){this.searchAndSort={sortName:"id",sortOrder:"down",isArchive:!1},this.getLvData()},async updateSort(e){this.searchAndSort.sortName===e?this.searchAndSort.sortOrder==="up"?this.searchAndSort.sortOrder="down":(this.searchAndSort.sortName="id",this.searchAndSort.sortOrder="up"):(this.searchAndSort.sortName=e,this.searchAndSort.sortOrder="up"),this.getLvData()},async getAll(){this.searchAndSort.page=1,this.searchAndSort.showAll=!0,this.getLvData()},async delete(e){i.modalLoad=!0,(await fetch(m.urls.bludo+"/delete",{method:"post",body:JSON.stringify({id:e}),headers:g.getHeader()})).status===200?(this.getLvData(),this.showBaseModal=!1,i.showAlertInfo("Готово")):i.showAlertError("Ошибка. Подробности в консоли или в логах"),i.modalLoad=!1}}});const St=(e,a,t)=>e==null||a==null?-1:e.toString().toLocaleLowerCase().indexOf(a.toString().toLocaleLowerCase()),At=se({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Lt(e,a,t){var V;const l=[],h=(t==null?void 0:t.default)??St,S=t!=null&&t.filterKeys?ue(t.filterKeys):!1,A=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return l;e:for(let D=0;D<e.length;D++){const[k,x=k]=ue(e[D]),d={},n={};let p=-1;if(a&&!(t!=null&&t.noFilter)){if(typeof k=="object"){const F=S||Object.keys(x);for(const C of F){const B=Be(x,C,x),_=(V=t==null?void 0:t.customKeyFilter)==null?void 0:V[C];if(p=_?_(B,a,k):h(B,a,k),p!==-1&&p!==!1)_?d[C]=p:n[C]=p;else if((t==null?void 0:t.filterMode)==="every")continue e}}else p=h(k,a,k),p!==-1&&p!==!1&&(n.title=p);const O=Object.keys(n).length,P=Object.keys(d).length;if(!O&&!P||(t==null?void 0:t.filterMode)==="union"&&P!==A&&!O||(t==null?void 0:t.filterMode)==="intersection"&&(P!==A||!O))continue}l.push({index:D,matches:{...n,...d}})}return l}function kt(e,a,t,l){const h=z([]),S=z(new Map),A=M(()=>l!=null&&l.transform?$(a).map(D=>[D,l.transform(D)]):$(a));_e(()=>{const D=typeof t=="function"?t():$(t),k=typeof D!="string"&&typeof D!="number"?"":String(D),x=Lt(A.value,k,{customKeyFilter:{...e.customKeyFilter,...$(l==null?void 0:l.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=$(a),n=[],p=new Map;x.forEach(O=>{let{index:P,matches:F}=O;const C=d[P];n.push(C),p.set(C.value,F)}),h.value=n,S.value=p});function V(D){return S.value.get(D.value)}return{filteredItems:h,filteredMatches:S,getMatches:V}}function xt(e,a,t){if(a==null)return e;if(Array.isArray(a))throw new Error("Multiple matches is not implemented");return typeof a=="number"&&~a?o(Z,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,a)]),o("span",{class:"v-autocomplete__mask"},[e.substr(a,t)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(a+t)])]):e}const Ct=se({autoSelectFirst:{type:[Boolean,String]},search:String,...At({filterKeys:["title"]}),...ut(),...Ee(ct({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...He({transition:!1})},"VAutocomplete"),Tt=ce()({name:"VAutocomplete",props:Ct(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,a){let{slots:t}=a;const{t:l}=Je(),h=z(),S=j(!1),A=j(!0),V=j(!1),D=z(),k=z(),x=re(e,"menu"),d=M({get:()=>x.value,set:s=>{var r;x.value&&!s&&((r=D.value)!=null&&r.ΨopenChildren)||(x.value=s)}}),n=j(-1),p=M(()=>{var s;return(s=h.value)==null?void 0:s.color}),O=M(()=>d.value?e.closeText:e.openText),{items:P,transformIn:F,transformOut:C}=Re(e),{textColorClasses:B,textColorStyles:_}=Ke(p),b=re(e,"search",""),f=re(e,"modelValue",[],s=>F(s===null?[null]:ue(s)),s=>{const r=C(s);return e.multiple?r:r[0]??null}),R=ht(),{filteredItems:le,getMatches:Se}=kt(e,P,()=>A.value?"":b.value),T=M(()=>e.hideSelected?le.value.filter(s=>!f.value.some(r=>r.value===s.value)):le.value),Ae=M(()=>f.value.map(s=>s.props.value)),X=M(()=>{var r;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&b.value===((r=T.value[0])==null?void 0:r.title))&&T.value.length>0&&!A.value&&!V.value}),oe=M(()=>e.hideNoData&&!P.value.length||e.readonly||(R==null?void 0:R.isReadonly.value)),ne=z(),{onListScroll:Le,onListKeydown:ke}=ft(ne,h);function xe(s){e.openOnClear&&(d.value=!0),b.value=""}function Ce(){oe.value||(d.value=!0)}function Ne(s){oe.value||(S.value&&(s.preventDefault(),s.stopPropagation()),d.value=!d.value)}function Ve(s){var K,c,L;if(e.readonly||R!=null&&R.isReadonly.value)return;const r=h.value.selectionStart,y=f.value.length;if((n.value>-1||["Enter","ArrowDown","ArrowUp"].includes(s.key))&&s.preventDefault(),["Enter","ArrowDown"].includes(s.key)&&(d.value=!0),["Escape"].includes(s.key)&&(d.value=!1),X.value&&["Enter","Tab"].includes(s.key)&&E(T.value[0]),s.key==="ArrowDown"&&X.value&&((K=ne.value)==null||K.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(s.key)){if(n.value<0){s.key==="Backspace"&&!b.value&&(n.value=y-1);return}const w=n.value,I=f.value[n.value];I&&!I.props.disabled&&E(I),n.value=w>=y-1?y-2:w}if(s.key==="ArrowLeft"){if(n.value<0&&r>0)return;const w=n.value>-1?n.value-1:y-1;f.value[w]?n.value=w:(n.value=-1,h.value.setSelectionRange((c=b.value)==null?void 0:c.length,(L=b.value)==null?void 0:L.length))}if(s.key==="ArrowRight"){if(n.value<0)return;const w=n.value+1;f.value[w]?n.value=w:(n.value=-1,h.value.setSelectionRange(0,0))}}}function Pe(s){b.value=s.target.value}function Ie(s){if(ye(h.value,":autofill")||ye(h.value,":-webkit-autofill")){const r=P.value.find(y=>y.title===s.target.value);r&&E(r)}}function Oe(){var s;S.value&&(A.value=!0,(s=h.value)==null||s.focus())}function Me(s){S.value=!0,setTimeout(()=>{V.value=!0})}function Te(s){V.value=!1}function Fe(s){(s==null||s===""&&!e.multiple)&&(f.value=[])}const U=j(!1);function E(s){if(e.multiple){const r=f.value.findIndex(y=>e.valueComparator(y.value,s.value));if(r===-1)f.value=[...f.value,s];else{const y=[...f.value];y.splice(r,1),f.value=y}}else f.value=[s],U.value=!0,b.value=s.title,d.value=!1,A.value=!0,De(()=>U.value=!1)}return ie(S,(s,r)=>{var y;s!==r&&(s?(U.value=!0,b.value=e.multiple?"":String(((y=f.value.at(-1))==null?void 0:y.props.title)??""),A.value=!0,De(()=>U.value=!1)):(!e.multiple&&!b.value?f.value=[]:X.value&&!V.value&&!f.value.some(K=>{let{value:c}=K;return c===T.value[0].value})&&E(T.value[0]),d.value=!1,b.value="",n.value=-1))}),ie(b,s=>{!S.value||U.value||(s&&(d.value=!0),A.value=!s)}),ie(d,()=>{if(!e.hideSelected&&d.value&&f.value.length){const s=T.value.findIndex(r=>f.value.some(y=>r.value===y.value));Qe&&window.requestAnimationFrame(()=>{var r;s>=0&&((r=k.value)==null||r.scrollToIndex(s))})}}),he(()=>{const s=!!(e.chips||t.chip),r=!!(!e.hideNoData||T.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),y=f.value.length>0,K=be.filterProps(e);return o(be,W({ref:h},K,{modelValue:b.value,"onUpdate:modelValue":Fe,focused:S.value,"onUpdate:focused":c=>S.value=c,validationValue:f.externalValue,counterValue:f.value.length,dirty:y,onInput:Pe,onChange:Ie,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":n.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:y?void 0:e.placeholder,"onClick:clear":xe,"onMousedown:control":Ce,onKeydown:Ve}),{...t,default:()=>o(Z,null,[o(je,W({ref:D,modelValue:d.value,"onUpdate:modelValue":c=>d.value=c,activator:"parent",contentClass:"v-autocomplete__content",disabled:oe.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Oe},e.menuProps),{default:()=>[r&&o(ze,{ref:ne,selected:Ae.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:ke,onFocusin:Me,onFocusout:Te,onScrollPassive:Le,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var c,L,w;return[(c=t["prepend-item"])==null?void 0:c.call(t),!T.value.length&&!e.hideNoData&&(((L=t["no-data"])==null?void 0:L.call(t))??o(me,{title:l(e.noDataText)},null)),o(vt,{ref:k,renderless:!0,items:T.value},{default:I=>{var ve;let{item:N,index:H,itemRef:J}=I;const fe=W(N.props,{ref:J,key:H,active:X.value&&H===0?!0:void 0,onClick:()=>E(N)});return((ve=t.item)==null?void 0:ve.call(t,{item:N,index:H,props:fe}))??o(me,fe,{prepend:G=>{let{isSelected:Q}=G;return o(Z,null,[e.multiple&&!e.hideSelected?o(mt,{key:N.value,modelValue:Q,ripple:!1,tabindex:"-1"},null):void 0,N.props.prependIcon&&o(ge,{icon:N.props.prependIcon},null)])},title:()=>{var G,Q;return A.value?N.title:xt(N.title,(G=Se(N))==null?void 0:G.title,((Q=b.value)==null?void 0:Q.length)??0)}})}}),(w=t["append-item"])==null?void 0:w.call(t)]}})]}),f.value.map((c,L)=>{function w(J){J.stopPropagation(),J.preventDefault(),E(c)}const I={"onClick:close":w,onMousedown(J){J.preventDefault(),J.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},N=s?!!t.chip:!!t.selection,H=N?Ue(s?t.chip({item:c,index:L,props:I}):t.selection({item:c,index:L})):void 0;if(!(N&&!H))return o("div",{key:c.value,class:["v-autocomplete__selection",L===n.value&&["v-autocomplete__selection--selected",B.value]],style:L===n.value?_.value:{}},[s?t.chip?o(q,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[H]}):o(gt,W({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},I),null):H??o("span",{class:"v-autocomplete__selection-text"},[c.title,e.multiple&&L<f.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[$e(",")])])])})]),"append-inner":function(){var I;for(var c=arguments.length,L=new Array(c),w=0;w<c;w++)L[w]=arguments[w];return o(Z,null,[(I=t["append-inner"])==null?void 0:I.call(t,...L),e.menuIcon?o(ge,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Ne,onClick:Xe,"aria-label":l(O.value),title:l(O.value)},null):void 0])}})}),Ge({isFocused:S,isPristine:A,menu:d,search:b,filteredItems:le,select:E},h)}});const Nt=se({text:String,...we(),...pe()},"VToolbarTitle"),Vt=ce()({name:"VToolbarTitle",props:Nt(),setup(e,a){let{slots:t}=a;return he(()=>{const l=!!(t.default||t.text||e.text);return o(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var h;return[l&&o("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(h=t.default)==null?void 0:h.call(t)])]}})}),{}}}),Pt=[null,"prominent","default","comfortable","compact"],It=se({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Pt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...We(),...we(),...Ye(),...Ze(),...pe({tag:"header"}),...qe()},"VToolbar"),Ft=ce()({name:"VToolbar",props:It(),setup(e,a){var p;let{slots:t}=a;const{backgroundColorClasses:l,backgroundColorStyles:h}=et(tt(e,"color")),{borderClasses:S}=at(e),{elevationClasses:A}=st(e),{roundedClasses:V}=lt(e),{themeClasses:D}=ot(e),{rtlClasses:k}=nt(),x=j(!!(e.extended||(p=t.extension)!=null&&p.call(t))),d=M(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),n=M(()=>x.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return rt({VBtn:{variant:"text"}}),he(()=>{var C;const O=!!(e.title||t.title),P=!!(t.image||e.image),F=(C=t.extension)==null?void 0:C.call(t);return x.value=!!(e.extended||F),o(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},l.value,S.value,A.value,V.value,D.value,k.value,e.class],style:[h.value,e.style]},{default:()=>[P&&o("div",{key:"image",class:"v-toolbar__image"},[t.image?o(q,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(it,{key:"image-img",cover:!0,src:e.image},null)]),o(q,{defaults:{VTabs:{height:Y(d.value)}}},{default:()=>{var B,_,b;return[o("div",{class:"v-toolbar__content",style:{height:Y(d.value)}},[t.prepend&&o("div",{class:"v-toolbar__prepend"},[(B=t.prepend)==null?void 0:B.call(t)]),O&&o(Vt,{key:"title",text:e.title},{text:t.title}),(_=t.default)==null?void 0:_.call(t),t.append&&o("div",{class:"v-toolbar__append"},[(b=t.append)==null?void 0:b.call(t)])])]}}),o(q,{defaults:{VTabs:{height:Y(n.value)}}},{default:()=>[o(dt,null,{default:()=>[x.value&&o("div",{class:"v-toolbar__extension",style:{height:Y(n.value)}},[F])]})]})]})}),{contentHeight:d,extensionHeight:n}}});export{Ft as V,yt as a,Dt as b,Vt as c,ee as d,Tt as e,pt as u};
