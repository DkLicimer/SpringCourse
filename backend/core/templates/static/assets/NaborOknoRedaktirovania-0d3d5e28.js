import{K as sa,P as ia,$ as L,a0 as ua,a1 as ba,X as O,a2 as va,Y as ma,a3 as ca,d as l,D as I,F as N,a4 as fa,j as T,a5 as ya,a6 as Va,_ as Y,a as q,o as d,c as s,b as o,w as r,f as m,y as c,i as C,e as z,h as x,g as G,l as u,t as v,k as b,u as ka,r as M,p as R,m as Da,s as ga}from"./index-3559784b.js";import{u as H,b as J,a as wa,V as j,c as _a}from"./VToolbar-64f8fe14.js";import{m as xa,d as Ca,u as pa,e as E,f as X,V as y,b as A}from"./VSelect-091fc47b.js";import{V as Sa,a as Ba}from"./VTable-074c8331.js";import{A as ha}from"./AppPagination-e4881fc5.js";import{V as za}from"./BludaOknoRedaktirovania-effee843.js";const Pa=sa({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...xa(),...Ca()},"VSwitch"),Ua=ia()({name:"VSwitch",inheritAttrs:!1,props:Pa(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,a){let{attrs:f,slots:e}=a;const V=L(t,"indeterminate"),k=L(t,"modelValue"),{loaderClasses:i}=ua(t),{isFocused:D,focus:n,blur:p}=pa(t),w=ba(),P=O(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),Q=va(),W=O(()=>t.id||`switch-${Q}`);function Z(){V.value&&(V.value=!1)}function $(S){var B,h;S.stopPropagation(),S.preventDefault(),(h=(B=w.value)==null?void 0:B.input)==null||h.click()}return ma(()=>{const[S,B]=ca(f),h=E.filterProps(t),aa=X.filterProps(t);return l(E,I({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":V.value},i.value,t.class]},S,h,{modelValue:k.value,"onUpdate:modelValue":U=>k.value=U,id:W.value,focused:D.value,style:t.style}),{...e,default:U=>{let{id:ea,messagesId:la,isDisabled:oa,isReadonly:ta,isValid:na}=U;return l(X,I({ref:w},aa,{modelValue:k.value,"onUpdate:modelValue":[_=>k.value=_,Z],id:ea.value,"aria-describedby":la.value,type:"checkbox","aria-checked":V.value?"mixed":void 0,disabled:oa.value,readonly:ta.value,onFocus:n,onBlur:p},B),{...e,default:_=>{let{backgroundColorClasses:K,backgroundColorStyles:g}=_;return l("div",{class:["v-switch__track",...K.value],style:g.value,onClick:$},null)},input:_=>{let{inputNode:K,icon:g,backgroundColorClasses:da,backgroundColorStyles:ra}=_;return l(N,null,[K,l("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":g||t.loading},t.inset?void 0:da.value],style:t.inset?void 0:ra.value},[l(fa,null,{default:()=>[t.loading?l(ya,{name:"v-switch",active:!0,color:na.value===!1?void 0:P.value},{default:F=>e.loader?e.loader(F):l(Va,{active:F.isActive,color:F.color,indeterminate:!0,size:"16",width:"2"},null)}):g&&l(T,{key:g,icon:g,size:"x-small"},null)]})])])}})}})}),{}}}),Ka={methods:{swichBludo(t){const a=this.nabor.dvData.items.indexOf(t);a!==-1?this.nabor.dvData.items.push(t):this.nabor.dvData.items.splice(a,1)}},setup(){const t=q(),a=H(),f=J(),e=wa();return{core:t,bluda:a,kategoriaBluda:e,nabor:f}}},Fa={class:"app-poisk d-flex bg-green-lighten-5 py-5 px-3"},Aa={class:""},Na={class:"overflow-x-auto"},Ta={class:"text-start"},La={style:{width:"200px"},class:"text-decoration-none d-flex py-2 h-100"},Oa={class:"text-decoration-none text-black px-0 py-2 h-100 d-flex"},Ia=["src"],Ma={class:"align-self-center"},Ra={key:1,class:"px-3"};function ja(t,a,f,e,V,k){return d(),s("div",null,[o("div",Fa,[l(z,null,{default:r(()=>[l(m,{cols:"12",sm:"5",md:"5",class:""},{default:r(()=>[l(y,{onKeydown:a[0]||(a[0]=c(i=>e.bluda.getLvData(),["enter"])),clearable:!0,class:"pt-0 br-20 bez-label bg-white",label:"Название",modelValue:e.bluda.searchAndSort.term,"onUpdate:modelValue":a[1]||(a[1]=i=>e.bluda.searchAndSort.term=i),variant:"outlined"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",sm:"5",md:"5",class:""},{default:r(()=>[l(A,{onKeydown:a[2]||(a[2]=c(i=>e.bluda.getLvData(),["enter"])),clearable:!0,"item-title":"nazvanie","item-value":"id",modelValue:e.bluda.searchAndSort.kategoria,"onUpdate:modelValue":a[3]||(a[3]=i=>e.bluda.searchAndSort.kategoria=i),items:e.kategoriaBluda.lvData,class:"pt-0 br-20 bez-label bg-white",label:"Категория",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(m,{cols:"12",sm:"2",class:""},{default:r(()=>[l(C,{onClick:a[4]||(a[4]=i=>e.bluda.getLvData()),color:"primary",elevation:"3",class:"d-block w-100 align-self-end br-15"},{default:r(()=>[l(T,{icon:"mdi-magnify"})]),_:1})]),_:1})]),_:1})]),o("div",Aa,[e.bluda.lvData.length?(d(),x(Sa,{key:0,hover:"",class:"text-body-2 cursor-pointer w-100 text-center overflow-x-auto border-t"},{default:r(()=>[a[7]||(a[7]=o("thead",null,[o("tr",null,[o("th",null,[o("b",null,"Блюдо")]),o("th",null,[o("b",null,"Включить?")])])],-1)),o("tbody",Na,[(d(!0),s(N,null,G(e.bluda.lvData,i=>(d(),s("tr",{key:i.id},[o("td",Ta,[o("div",La,[o("div",Oa,[i.photo?(d(),s("img",{key:0,class:"br-20 me-3 d-block",src:i.photo,style:{width:"30px"}},null,8,Ia)):u("",!0),o("div",Ma,v(i.nazvanie),1)])])]),o("td",null,[l(Ua,{modelValue:e.nabor.dvData.items,"onUpdate:modelValue":a[5]||(a[5]=D=>e.nabor.dvData.items=D),value:i.id,color:"primary"},null,8,["modelValue","value"])])]))),128))])]),_:1})):(d(),s("div",Ra,[l(Ba,{icon:"$info",class:"br-20 mt-3",color:"secondary",variant:"tonal",elevation:4},{default:r(()=>[a[9]||(a[9]=o("b",null,"Ничего не найдено",-1)),l(C,{size:"small",variant:"tonal",color:"primary",class:"br-20 ms-3",onClick:a[6]||(a[6]=i=>e.bluda.reseatSearch())},{default:r(()=>a[8]||(a[8]=[b("Сбросить фильтры ")])),_:1})]),_:1})]))])])}const Ea=Y(Ka,[["render",ja]]),Xa={components:{AppPagination:ha,NaborBludaTable:Ea},setup(){const t=q(),a=J(),f=H(),e=ka();return{core:t,nabor:a,bluda:f,user:e}},mounted(){this.user.userData.isFranchisee&&(this.bluda.readOnly=!0)}},Ya={key:0},qa=["src"],Ga={class:"mt-2"},Ha={key:2,class:"w-100 py-3 text-center embed-responsive-4by3 border br-20 small elevation-1"},Ja={class:"mt-7 mb-10"},Qa={accept:"image/*",type:"file",ref:"failField",class:"d-none"},Wa={key:0},Za=["src"],$a={key:1,class:"w-100 py-3 cursor-pointer text-center embed-responsive-4by3 border br-20 small elevation-1"},ae={key:2,class:"w-100 py-3 text-center embed-responsive-4by3 border br-20 small elevation-1"},ee={class:"mb-2"},le={key:0,class:"mb-2"},oe={key:1,class:"mb-2"},te={key:2,class:"mb-2"},ne={key:3,class:"mb-2"},de={key:4,class:"mb-2"},re={key:5,class:"mb-2"},se={key:6,class:"mb-2"},ie={key:7,class:"mb-2"},ue={key:8},be={class:"border-b py-2"},ve={key:0,class:"mt-7 mb-10"};function me(t,a,f,e,V,k){const i=M("nabor-bluda-table"),D=M("app-pagination");return d(),x(ga,{modelValue:e.nabor.showBaseModal,"onUpdate:modelValue":a[16]||(a[16]=n=>e.nabor.showBaseModal=n),scrollable:"",width:"1000"},{default:r(()=>[l(Da,{color:""},{default:r(()=>[l(j,{color:"primary"},{default:r(()=>[l(_a,null,{default:r(()=>[b(v(e.nabor.baseModalTitle),1)]),_:1}),l(C,{icon:"mdi-close",onClick:a[0]||(a[0]=n=>e.nabor.showBaseModal=!1)})]),_:1}),e.bluda.readOnly?u("",!0):(d(),x(R,{key:0},{default:r(()=>[l(z,null,{default:r(()=>[l(m,{cols:"12",md:"2"},{default:r(()=>[o("input",{accept:"image/*",type:"file",ref:"failField",class:"d-none",onChange:a[1]||(a[1]=n=>e.nabor.updatePhoto(e.nabor.dvData.id,t.$refs.failField))},null,544),e.nabor.dvData.photo?(d(),s("div",Ya,[o("img",{onClick:a[2]||(a[2]=n=>t.$refs.failField.click()),class:"br-20 w-100 cursor-pointer elevation-3",src:e.nabor.dvData.photo},null,8,qa),o("div",Ga,[l(C,{class:"w-100 br-15",size:"small",variant:"tonal",color:"secondary",onClick:a[3]||(a[3]=n=>e.nabor.deletePhoto(e.nabor.dvData.id))},{default:r(()=>[l(T,{icon:"mdi-delete"})]),_:1})])])):e.nabor.dvData.id?(d(),s("div",{key:1,onClick:a[4]||(a[4]=n=>t.$refs.failField.click()),class:"w-100 py-3 cursor-pointer text-center embed-responsive-4by3 border br-20 small elevation-1"}," Фото нет ")):(d(),s("div",Ha,a[17]||(a[17]=[o("small",null,"Фото можно будет добавить после сохранения",-1)])))]),_:1}),l(m,{cols:"12",md:"10"},{default:r(()=>[l(y,{onKeydown:a[5]||(a[5]=c(n=>e.nabor.save(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"*Название",modelValue:e.nabor.dvData.nazvanie,"onUpdate:modelValue":a[6]||(a[6]=n=>e.nabor.dvData.nazvanie=n)},null,8,["modelValue"]),l(A,{"item-title":"name","item-value":"id",class:"pt-0 br-20 mb-2",variant:"underlined",label:"Постное",items:e.core.yesNoList,modelValue:e.nabor.dvData.isPostnoeBludo,"onUpdate:modelValue":a[7]||(a[7]=n=>e.nabor.dvData.isPostnoeBludo=n)},null,8,["items","modelValue"]),l(A,{"item-title":"name","item-value":"id",class:"pt-0 br-20 mb-2",variant:"underlined",label:"Вид",items:e.core.vidNabora,modelValue:e.nabor.dvData.vid,"onUpdate:modelValue":a[8]||(a[8]=n=>e.nabor.dvData.vid=n)},null,8,["items","modelValue"]),l(y,{onKeydown:a[9]||(a[9]=c(n=>e.nabor.save(),["enter"])),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"*Стоимость",modelValue:e.nabor.dvData.stoimost,"onUpdate:modelValue":a[10]||(a[10]=n=>e.nabor.dvData.stoimost=n)},null,8,["modelValue"]),l(y,{onKeydown:c(e.nabor.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Калорийность",modelValue:e.nabor.dvData.kaloriinost,"onUpdate:modelValue":a[11]||(a[11]=n=>e.nabor.dvData.kaloriinost=n)},null,8,["onKeydown","modelValue"]),l(z,null,{default:r(()=>[l(m,{cols:"12",md:"4"},{default:r(()=>[l(y,{onKeydown:c(e.nabor.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Белки",modelValue:e.nabor.dvData.belki,"onUpdate:modelValue":a[12]||(a[12]=n=>e.nabor.dvData.belki=n)},null,8,["onKeydown","modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:r(()=>[l(y,{onKeydown:c(e.nabor.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Жиры",modelValue:e.nabor.dvData.ziri,"onUpdate:modelValue":a[13]||(a[13]=n=>e.nabor.dvData.ziri=n)},null,8,["onKeydown","modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:r(()=>[l(y,{onKeydown:c(e.nabor.save,["enter"]),clearable:!0,class:"pt-0 br-20 mb-3",variant:"underlined",label:"Углеводы",modelValue:e.nabor.dvData.uglevodi,"onUpdate:modelValue":a[14]||(a[14]=n=>e.nabor.dvData.uglevodi=n)},null,8,["onKeydown","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o("div",Ja,[l(i),l(D,{store:e.bluda},null,8,["store"])])]),_:1})),e.bluda.readOnly?(d(),x(R,{key:1},{default:r(()=>[l(z,null,{default:r(()=>[l(m,{cols:"12",md:"2"},{default:r(()=>[o("input",Qa,null,512),e.nabor.dvData.photo?(d(),s("div",Wa,[o("img",{class:"br-20 w-100 cursor-pointer elevation-3",src:e.nabor.dvData.photo},null,8,Za),a[18]||(a[18]=o("div",{class:"mt-2"},null,-1))])):e.nabor.dvData.id?(d(),s("div",$a," Фото нет ")):(d(),s("div",ae,a[19]||(a[19]=[o("small",null,"Фото можно будет добавить после сохранения",-1)])))]),_:1}),l(m,{cols:"12",md:"10"},{default:r(()=>{var n,p,w;return[o("h3",ee,v(e.nabor.dvData.nazvanie),1),e.nabor.dvData.isPostnoeBludo?(d(),s("div",le,a[20]||(a[20]=[o("b",null,"Постное",-1),b(": Да ")]))):(d(),s("div",oe,a[21]||(a[21]=[o("b",null,"Постное",-1),b(": Нет ")]))),e.nabor.dvData.vid?(d(),s("div",te,[a[22]||(a[22]=o("b",null,"Вид",-1)),b(": "+v(e.nabor.dvData.vidDisplay),1)])):u("",!0),e.nabor.dvData.stoimost?(d(),s("div",ne,[a[23]||(a[23]=o("b",null,"Стоимость",-1)),b(": "+v(e.nabor.dvData.stoimost)+" руб. ",1)])):u("",!0),e.nabor.dvData.kaloriinost?(d(),s("div",de,[a[24]||(a[24]=o("b",null,"Калорийность",-1)),b(": "+v(e.nabor.dvData.kaloriinost)+" ккл. ",1)])):u("",!0),e.nabor.dvData.belki?(d(),s("div",re,[a[25]||(a[25]=o("b",null,"Белки",-1)),b(": "+v(e.nabor.dvData.belki)+" г.",1)])):u("",!0),e.nabor.dvData.ziri?(d(),s("div",se,[a[26]||(a[26]=o("b",null,"Жиры",-1)),b(": "+v(e.nabor.dvData.ziri)+" г.",1)])):u("",!0),e.nabor.dvData.uglevodi?(d(),s("div",ie,[a[27]||(a[27]=o("b",null,"Углеводы",-1)),b(": "+v(e.nabor.dvData.uglevodi)+" г.",1)])):u("",!0),((p=(n=e.nabor.dvData)==null?void 0:n.sostav)==null?void 0:p.length)>0?(d(),s("div",ue,[a[28]||(a[28]=o("h3",{class:"mt-5"},"Состав",-1)),(d(!0),s(N,null,G((w=e.nabor.dvData)==null?void 0:w.sostav,P=>(d(),s("div",be,[l(za,{dot:"",inline:"",color:"primary"}),b(" "+v(P.bludo.nazvanie),1)]))),256))])):u("",!0)]}),_:1})]),_:1}),e.user.userData.isFranchisee?u("",!0):(d(),s("div",ve,[l(i),l(D,{store:e.bluda},null,8,["store"])]))]),_:1})):u("",!0),e.bluda.readOnly?u("",!0):(d(),x(j,{key:2,color:"",class:"pb-0 mb-0"},{default:r(()=>[l(C,{elevation:"3",color:"primary",variant:"flat",onClick:a[15]||(a[15]=n=>e.nabor.save()),class:"ms-auto br-20"},{default:r(()=>a[29]||(a[29]=[b(" Сохранить ")])),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue"])}const ge=Y(Xa,[["render",me]]);export{ge as N};
