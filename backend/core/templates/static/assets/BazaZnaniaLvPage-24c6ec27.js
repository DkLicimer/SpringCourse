import{A as L}from"./AppPoisk-5a555f71.js";import{a as g,q as M,L as S,C as A,_ as V,o as l,h as u,w as t,d as a,k as _,t as c,i as f,p as Z,b as r,e as p,c as i,g as b,F as d,m as C,s as N,j as T,l as h,f as x,v as F,r as z,V as $}from"./index-3559784b.js";import"./store-cff60839.js";import{V as H,c as I}from"./VToolbar-64f8fe14.js";import"./VSelect-091fc47b.js";const m=g(),B=M("bazaZnania",{state:()=>({lvData:[],dvData:{},showBaseModal:!1,searchAndSort:{nazvanie:""}}),getters:{searchList:o=>[{type:"text",label:"Название",model:"nazvanie"}]},actions:{async getLvData(){m.modalLoad=!0;const o=await fetch(S.urls.bazaZnania+"/get",{method:"post",body:JSON.stringify(this.searchAndSort),headers:A.getHeader()});if(o.status===200){const e=await o.json();this.lvData=e.data,this.pageCount=e.pageCount,this.itemsCount=e.itemsCount}else m.showAlertError("Ошибка. Подробности в консоли или в логах");m.modalLoad=!1},async openBaseModal(o){this.dvData=o,this.showBaseModal=!0},reseatSearch(){this.searchAndSort={nazvanie:""},this.getLvData()}}}),O={setup(){return{bazaZnania:B()}},components:{}},j={class:"mb-5"},E=["innerHTML"],J={key:0,class:"flex-wrap me-3 mb-3"},K=["href"];function P(o,e,k,s,w,y){return l(),u(N,{modelValue:s.bazaZnania.showBaseModal,"onUpdate:modelValue":e[1]||(e[1]=n=>s.bazaZnania.showBaseModal=n),scrollable:"",width:"900"},{default:t(()=>[a(C,{color:""},{default:t(()=>[a(H,{color:"primary"},{default:t(()=>[a(I,null,{default:t(()=>[_(c(s.bazaZnania.dvData.nazvanie),1)]),_:1}),a(f,{icon:"mdi-close",onClick:e[0]||(e[0]=n=>s.bazaZnania.showBaseModal=!1)})]),_:1}),a(Z,{class:"py-5"},{default:t(()=>[r("h2",j,c(s.bazaZnania.dvData.nazvanie),1),r("div",null,[r("div",{innerHTML:s.bazaZnania.dvData.content},null,8,E),a(p,{class:"mt-5 d-flex"},{default:t(()=>[(l(!0),i(d,null,b(s.bazaZnania.dvData.faili,n=>(l(),i(d,null,[n.vivoditKakFoto?h("",!0):(l(),i("div",J,[a(f,{color:"primary",variant:"flat",class:"br-15"},{default:t(()=>[_(c(n.nazvanie)+" ",1),a(T,{icon:"mdi-download",class:"ms-2"})]),_:2},1024)]))],64))),256))]),_:1}),a(p,{class:"mt-5"},{default:t(()=>[(l(!0),i(d,null,b(s.bazaZnania.dvData.faili,n=>(l(),i(d,null,[n.vivoditKakFoto?(l(),u(x,{key:0,cols:"6",sm:"4",md:"3"},{default:t(()=>[r("a",{href:n.fail,target:"_blank"},[a(F,{class:"br-15",src:n.preview},null,8,["src"])],8,K)]),_:2},1024)):h("",!0)],64))),256))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const q=V(O,[["render",P]]),G={components:{AppPoisk:L,BazaZnaniaBaseModal:q},setup(){const o=g(),e=B();return{core:o,bazaZnania:e}},async created(){this.bazaZnania.reseatSearch()}},R={class:"flex-1-1 position-relative bg-grey-lighten-4 pb-5"},U={class:"d-flex flex-1-1 align-items-center h-100"},Q={class:"d-flex"},W={class:"mb-5"};function X(o,e,k,s,w,y){const n=z("app-poisk"),D=z("baza-znania-base-modal");return l(),i("div",R,[r("div",U,[a($,{class:"mb-10"},{default:t(()=>[r("div",Q,[e[0]||(e[0]=r("h1",{class:"mb-5 me-auto"},"База знаний",-1)),a(n,{store:s.bazaZnania,class:"me-4"},null,8,["store"])]),a(p,null,{default:t(()=>[(l(!0),i(d,null,b(s.bazaZnania.lvData,v=>(l(),u(x,{class:"",cols:"6",md:"4",lg:"3"},{default:t(()=>[a(C,{elevation:"3",class:"br-20 px-7 py-7"},{default:t(()=>[a(Z,{class:"text-center"},{default:t(()=>[r("h2",W,c(v.nazvanie),1),a(f,{color:"primary",variant:"flat",class:"px-10 br-15",onClick:Y=>s.bazaZnania.openBaseModal(v)},{default:t(()=>e[1]||(e[1]=[_("Открыть")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),a(D)]),_:1})])])}const oa=V(G,[["render",X]]);export{oa as default};
